<html lang="en-US">
    <head>
      <meta charset="UTF-8">
       <link rel="stylesheet" href="style.css">
       <meta name="viewport" content="width=device-width, initial-scale=1">
       <meta name="robots" content="noindex">
       <title>End Game - Search</title>
    </head>
   <body>
       <section class="header-no-home">
           <nav>
               <a href="index.html"><img src="./img/EndGame.png"></a>
               <div class="nav-links" id="nav-links">
                   <!--Close Phone Menu-->
                   <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16" onclick="hideMenu()">
                       <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                     </svg>
                   <ul>
                    <li><a href="./index.html">HOME</a></li>
                    <li><a href="./Console.html">CONSOLE</a></li>
                    <li><a href="./search.html">TOP GAMES</a></li>
                       <li>
                       <div class="search-box">
                           <input type="text" id="search-txt" class="search-txt" placeholder="Search..."/>
                           <a class="search-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="white" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                              </svg>
                           </a>
                          </div>
                       </li>
                   </ul>
                   
               </div>
               <!---Open Phone Menu-->
               <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16" onclick="showMenu()">
                   <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                 </svg>
               </nav>
       </section>

   <section class="game">
       <div class="row">
           <div class="game-col">
            <div class="flip-card">
                <div class="flip-card-inner">
                  <div class="flip-card-front">
                    <img id=oneIMG alt="Loading" style="width:300px;height:300px;">
                  </div>
                  <div class="flip-card-back" id="oneDiv"> 
                  </div>
                </div>
              </div>
           </div>
           <div class="game-col">
               <div class="game-col">
                <div class="flip-card">
                    <div class="flip-card-inner">
                      <div class="flip-card-front">
                        <img id=twoIMG alt="Loading" style="width:300px;height:300px;">
                      </div>
                      <div class="flip-card-back" id="twoDiv"> 
                      </div>
                    </div>
                  </div>
               </div>
           </div>
           <div class="game-col">
            <div class="flip-card">
                <div class="flip-card-inner">
                  <div class="flip-card-front">
                    <img id=threeIMG alt="Loading" style="width:300px;height:300px;">
                  </div>
                  <div class="flip-card-back" id="threeDiv"> 
                  </div>
                </div>
              </div>
           </div>
           </div>
       </div>
   </section>

   <section class="game">
    <div class="row">
        <div class="game-col">
         <div class="flip-card">
             <div class="flip-card-inner">
               <div class="flip-card-front">
                 <img id=fourIMG alt="Loading" style="width:300px;height:300px;">
               </div>
               <div class="flip-card-back" id="fourDiv"> 
               </div>
             </div>
           </div>
        </div>
        <div class="game-col">
            <div class="game-col">
             <div class="flip-card">
                 <div class="flip-card-inner">
                   <div class="flip-card-front">
                     <img id=fiveIMG alt="Loading" style="width:300px;height:300px;">
                   </div>
                   <div class="flip-card-back" id="fiveDiv"> 
                   </div>
                 </div>
               </div>
            </div>
        </div>
        <div class="game-col">
         <div class="flip-card">
             <div class="flip-card-inner">
               <div class="flip-card-front">
                 <img id=sixIMG alt="Loading" style="width:300px;height:300px;">
               </div>
               <div class="flip-card-back" id="sixDiv"> 
               </div>
             </div>
           </div>
        </div>
        </div>
    </div>
</section>
<section class="game">
  <div class="row">
      <div class="game-col">
       <div class="flip-card">
           <div class="flip-card-inner">
             <div class="flip-card-front">
               <img id=sevenIMG alt="Loading" style="width:300px;height:300px;">
             </div>
             <div class="flip-card-back" id="sevenDiv"> 
             </div>
           </div>
         </div>
      </div>
      <div class="game-col">
          <div class="game-col">
           <div class="flip-card">
               <div class="flip-card-inner">
                 <div class="flip-card-front">
                   <img id=eightIMG alt="Loading" style="width:300px;height:300px;">
                 </div>
                 <div class="flip-card-back" id="eightDiv"> 
                 </div>
               </div>
             </div>
          </div>
      </div>
      <div class="game-col">
       <div class="flip-card">
           <div class="flip-card-inner">
             <div class="flip-card-front">
               <img id=nineIMG alt="Loading" style="width:300px;height:300px;">
             </div>
             <div class="flip-card-back" id="nineDiv"> 
             </div>
           </div>
         </div>
      </div>
      </div>
  </div>
</section>
       <!-----Javascript for Toggle Menu-->
       <script>
           var menu = document.getElementById("nav-links");
           function showMenu() {
               menu.style.right = "0";
           }
           function hideMenu() {
               menu.style.right = "-200px";
           }
       </script>
       <script>
        /*Start of IMG Element*/
        var  oneIMG = document.getElementById("oneIMG");
        var  twoIMG = document.getElementById("twoIMG");
        var  threeIMG = document.getElementById("threeIMG");
        var  fourIMG = document.getElementById("fourIMG");
        var  fiveIMG = document.getElementById("fiveIMG");
        var  sixIMG = document.getElementById("sixIMG");
        var  sevenIMG = document.getElementById("sevenIMG");
        var  eightIMG = document.getElementById("eightIMG");
        var  nineIMG = document.getElementById("nineIMG");
        /*End of IMG Element*/
        
        /*Start of Text Element*/
        var  oneDiv = document.getElementById("oneDiv");
        var  twoDiv = document.getElementById("twoDiv");
        var  threeDiv = document.getElementById("threeDiv");
        var  fourDiv = document.getElementById("fourDiv");
        var  fiveDiv = document.getElementById("fiveDiv");
        var  sixDiv = document.getElementById("sixDiv");
        var  sevenDiv = document.getElementById("sevenDiv");
        var  eightDiv = document.getElementById("eightDiv");
        var  nineDiv = document.getElementById("nineDiv");
        /*End of Text Element*/
    
    
    var value;
    var count = 0;
    function extractUrlParams(){	
        var t = location.search.substring(1).split('&');
        var f = [];
        for (var i=0; i<t.length; i++){
            var x = t[ i ].split('=');
            f[x[0]]=x[1];
        }
        if (f.search === undefined)
        {f.search = "hall-of-fame"
            }
        return f;
    }
    
    var p1 = new Promise(function(resolve) {
      resolve(extractUrlParams());
     });
     p1.then((valeur) => {	
         var Mario = valeur;
         var p2 = new Promise(function(resolve) {
    var requestURL = 'https://api.opencritic.com/api/game/search?criteria=${' + Mario.search + '}';
    var request = new XMLHttpRequest();
    request.open('GET', requestURL);
    request.responseType = 'json';
    request.send(); 
    request.onload = function() {
      value = request.response;
       resolve(value);
    }
     }); 
     p2.then((P2value) => {
          value.forEach(function(item){
              
          var urlAPI = "https://api.opencritic.com/api/game/"+ P2value[count].id;
          count += 1;
    var Newrequest = new XMLHttpRequest();
    Newrequest.open('GET', urlAPI);
    Newrequest.responseType = 'json';
    Newrequest.send();
    Newrequest.onload = function() {
      var Newvalue = Newrequest.response;
      var IMGData = "https:"+ Newvalue.bannerScreenshot.fullRes;
    var regex = /([\.\?\!\,])/;
    var regexOfDate = /([T])/;
    var match = Newvalue.description.match(regex);
    var index = match.index;
    var description = Newvalue.description.slice(0,index+1);
    var editor = Newvalue.Companies[0].name;
    var matchOfDate = Newvalue.firstReleaseDate.match(regexOfDate);
    var indexOfDate = matchOfDate.index;
    var date = Newvalue.firstReleaseDate.slice(0,10);
    var score = Newvalue.averageScore.toString().slice(0,4);
    if (score < 0){
        score = "Nan";
    };
    
      if (oneIMG.src === "")
      {
          oneIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          oneDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          oneDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          oneDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          oneDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          oneDiv.appendChild(editorP);
          }
          else if (twoIMG.src === "")
      {
          twoIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          twoDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          twoDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          twoDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          twoDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          twoDiv.appendChild(editorP);
          }
          else if (threeIMG.src === "")
      {
          threeIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          threeDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          threeDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          threeDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          threeDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          threeDiv.appendChild(editorP);
          }
          else if (fourIMG.src === "")
      {
          fourIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          fourDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          fourDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          fourDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          fourDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          fourDiv.appendChild(editorP);
          }
          else if (fiveIMG.src === "")
      {
          fiveIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          fiveDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          fiveDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          fiveDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          fiveDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          fiveDiv.appendChild(editorP);
          }
          else if (sixIMG.src === "")
      {
          sixIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          sixDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          sixDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          sixDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          sixDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          sixDiv.appendChild(editorP);
          }
          else if (sevenIMG.src === "")
      {
          sevenIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          sevenDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          sevenDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          sevenDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          sevenDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          sevenDiv.appendChild(editorP);
          }
          else if (eightIMG.src === "")
      {
          eightIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          eightDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          eightDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          eightDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          eightDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          eightDiv.appendChild(editorP);
          }
          else if (nineIMG.src === "")
      {
          nineIMG.src = IMGData;
          var name = document.createElement("h1");
          name.textContent = Newvalue.name;
          name.style.fontSize = "20px";
          nineDiv.appendChild(name);
          var dateP = document.createElement("p");
          dateP.textContent = "Release Date: " + date;
          dateP.style.fontSize = "12px";
          nineDiv.appendChild(dateP);
          var note =  document.createElement("p");
          note.textContent = "Recommended  at "+ score +"%";
          note.style.fontSize = "12px";
          nineDiv.appendChild(note);
          var descriptionP = document.createElement("p");
          descriptionP.textContent = description;
          descriptionP.style.fontSize = "15px";
          nineDiv.appendChild(descriptionP);
          var editorP = document.createElement("p");
          editorP.textContent = "Editor: " + editor;
          editorP.style.fontSize = "12px";
          nineDiv.appendChild(editorP);
          }
    }});
        })});
    </script>
    <script>
      document.getElementById("search-txt").addEventListener("keyup", function(event) {
          event.preventDefault();
          if (event.keyCode === 13) {
              document.location.href="./search.html?search="+document.getElementById("search-txt").value; 
          }
      });
  </script>
   </body>
</html>
